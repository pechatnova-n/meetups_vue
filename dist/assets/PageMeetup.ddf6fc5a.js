import{M as T,o as l,c as h,d as p,t as M,B as x,z as P,r as c,a as o,w as s,m as S,j as i,g as w,N as z,i as v}from"./vendor.30b2d013.js";import{_ as U,d as B,r as N,c as R}from"./index.079bc0eb.js";import{M as j}from"./MeetupInfo.6957d629.js";import{U as A}from"./UiButton.aef3540d.js";import{a as q,l as E,b as k}from"./meetupsApi.41c21e5b.js";import{U as L,a as D}from"./UiTabs.e58e29fb.js";import{U as O}from"./UiPageTitle.2acb23d3.js";const y={name:"MeetupCover",props:{title:{type:String},image:{type:[String,null]}},computed:{getBgImage(){return this.image?this.image:"var(--default-cover)"}}},I=()=>{T(a=>({"24efbfb4":a.getBgImage}))},V=y.setup;y.setup=V?(a,e)=>(I(),V(a,e)):I;const F=y,G={class:"meetup-cover__title"};function H(a,e,t,n,r,u){return l(),h("div",{class:"meetup-cover",style:x([t.image?{"--bg-url":"url("+t.image+") "}:""])},[p("h1",G,M(t.title),1)],4)}const J=U(F,[["render",H],["__scopeId","data-v-386269e1"]]);const K={name:"MeetupView",components:{UiButton:A,MeetupCover:J,MeetupInfo:j,UiContainer:B},props:{meetup:{type:Object,required:!0}},setup(a){const e=P("toaster"),t=async()=>{await q(a.meetup.id).then(()=>{e().success("\u0412\u044B \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u044B \u0432 \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0438 \u043C\u0438\u0442\u0430\u043F\u0430")}).catch(u=>{e().error(u.message)})},n=async()=>{await E(a.meetup.id).then(()=>{e().success("\u0412\u044B \u0443\u0434\u0430\u043B\u0435\u043D\u044B \u0438\u0437 \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432 \u043C\u0438\u0442\u0430\u043F\u0430")}).catch(u=>{e().error(u.message)})},r=async()=>{console.log("delete"),await r(a.meetup.id).then(()=>{e().success("\u041C\u0438\u0442\u0430\u043F \u0443\u0434\u0430\u043B\u0435\u043D"),N.push({name:"index"})}).catch(u=>{e().error(u.message)})};return{participate:t,deleteParticipate:n,deleteMeetup:r}}},Q={class:"meetup"},W={class:"meetup__content"},X={class:"meetup__aside"},Y={class:"meetup__aside-buttons"};function Z(a,e,t,n,r,u){const d=c("MeetupCover"),m=c("MeetupInfo"),_=c("UiButton"),f=c("RouterLink"),g=c("UiContainer");return l(),h("div",null,[o(d,{title:t.meetup.title,image:t.meetup.image},null,8,["title","image"]),o(g,null,{default:s(()=>[p("div",Q,[p("div",W,[S(a.$slots,"default",{},void 0,!0)]),p("div",X,[o(m,{organizer:t.meetup.organizer,place:t.meetup.place,date:t.meetup.date},null,8,["organizer","place","date"]),p("div",Y,[o(f,{to:{name:"editMeetup",params:{meetupId:t.meetup.id}}},{default:s(()=>[o(_,{variant:"primary",class:"meetup__aside-button"},{default:s(()=>[i("\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C")]),_:1})]),_:1},8,["to"]),o(_,{variant:"danger",class:"meetup__aside-button",onClick:n.deleteMeetup},{default:s(()=>[i("\u0423\u0434\u0430\u043B\u0438\u0442\u044C")]),_:1},8,["onClick"]),o(_,{variant:"secondary",class:"meetup__aside-button",onClick:n.deleteParticipate},{default:s(()=>[i("\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u0443\u0447\u0430\u0441\u0442\u0438\u0435")]),_:1},8,["onClick"]),o(_,{variant:"primary",class:"meetup__aside-button",onClick:n.participate},{default:s(()=>[i(" \u0423\u0447\u0430\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C ")]),_:1},8,["onClick"])])])])]),_:3})])}const $=U(K,[["render",Z],["__scopeId","data-v-803164a7"]]),ee={name:"PageMeetup",components:{UiPageTitle:O,UiTab:L,UiTabs:D,MeetupView:$,UiAlert:R,UiContainer:B},async beforeRouteEnter(a){const e=await k(+a.params.meetupId);return e.success?t=>{t.setMeetup(e.data)}:{name:"meetups"}},props:{meetupId:{type:Number,required:!0}},setup(a){const e=w(null),t=w(null);return z(()=>a.meetupId,async()=>{e.value=null,t.value=null;const u=await k(a.meetupId);u.success?e.value=u.data:t.value=u.error.message}),{meetup:e,error:t,setMeetup:u=>e.value=u}}},te={class:"page-meetup"};function ae(a,e,t,n,r,u){const d=c("UiPageTitle"),m=c("UiTab"),_=c("RouterView"),f=c("UiTabs"),g=c("MeetupView"),C=c("UiAlert"),b=c("UiContainer");return l(),h("div",te,[n.meetup?(l(),v(g,{key:0,meetup:n.meetup},{default:s(()=>[o(d,null,{default:s(()=>[i(M(n.meetup.title),1)]),_:1}),o(f,null,{tabs:s(()=>[o(m,{to:{name:"meetup.description",params:{meetupId:n.meetup.id}}},{default:s(()=>[i("\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435")]),_:1},8,["to"]),o(m,{to:{name:"meetup.agenda",params:{meetupId:n.meetup.id}}},{default:s(()=>[i("\u041F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0430")]),_:1},8,["to"])]),default:s(()=>[o(_,{meetup:n.meetup},null,8,["meetup"])]),_:1})]),_:1},8,["meetup"])):n.error?(l(),v(b,{key:1},{default:s(()=>[o(C,null,{default:s(()=>[i(M(n.error),1)]),_:1})]),_:1})):(l(),v(b,{key:2},{default:s(()=>[o(C,null,{default:s(()=>[i("\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...")]),_:1})]),_:1}))])}const _e=U(ee,[["render",ae]]);export{_e as default};
